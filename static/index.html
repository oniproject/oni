<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<link rel='stylesheet/less' type='text/css' href='styles.less' />
</head>
<body>

<div id=chat>
	<div class=messages>
		<div class=msg v-for='m in msg'>{{m}}</div>
	</div>
	<form @submit.prevent="$emit('submit')">
		<input type=text id=msg autocomplete=off
			@focus="$emit('focus')"
			@blur="$emit('blur')"
			>
		<input type=submit value='>'>
	</form>
</div>


<script src='vendor/keypress-2.1.5.min.js'></script>
<script src='vendor/cbor.js'></script>
<script src='vendor/vue.min.js'></script>
<script src='vendor/less.min.js'></script>
<script src='vendor/pixi.min.js'></script>

<script>
const WS_HOST = 'localhost:9000'
</script>

<script src=js/client.js></script>
<script src=js/bat.js></script>
<script src=js/chat.js></script>
<script src=js/game.js></script>
<script src=js/main.js></script>

<script>
let code = new Uint8Array([0,97,115,109,1,0,0,0,1,133,128,128,128,0,1,96,0,1,127,3,130,128,128,128,0,1,0,4,132,128,128,128,0,1,112,0,0,5,131,128,128,128,0,1,0,1,6,129,128,128,128,0,0,7,146,128,128,128,0,2,6,109,101,109,111,114,121,2,0,5,104,101,108,108,111,0,0,10,138,128,128,128,0,1,132,128,128,128,0,0,65,16,11,11,146,128,128,128,0,1,0,65,16,11,12,72,101,108,108,111,32,87,111,114,108,100,0])

let module = new WebAssembly.Module(code)
let instance = new WebAssembly.Instance(module)
let memory = new Uint8Array(instance.exports.memory.buffer)
let hello_result = instance.exports.hello()

function parse_utf8(h, p) {
  let s = ''
  for (let i = p; h[i]; i++) {
    s += String.fromCharCode(h[i])
  }
  return s
}

console.log(parse_utf8(memory, hello_result));

</script>
</body>
</html>
